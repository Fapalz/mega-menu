/**
 * MegaMenu  1.1.1
 * GitHub template for starting new projects
 * https://github.com/Fapalz/mega-menu#readme
 *
 * Copyright 2020-2022 Gladikov Kirill - Fapalz <blacesmot@gmail.com>
 *
 * Released under the MIT License
 *
 * Released on: August 20, 2022
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).MegaMenu=e()}(this,(function(){"use strict";var t="undefined"!=typeof window,e=("undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform&&WXEnvironment.platform.toLowerCase(),t&&window.navigator.userAgent.toLowerCase());e&&/msie|trident/.test(e);var n=e&&e.indexOf("msie 9.0")>0;e&&e.indexOf("edge/");e&&e.indexOf("android"),e&&/iphone|ipad|ipod|ios/.test(e),e&&/chrome\/\d+/.test(e),e&&/phantomjs/.test(e),e&&e.match(/firefox\/(\d+)/);var i="transition",o="animation",s="transition",a="transitionend",r="animation",l="animationend";function h(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function c(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return h(e)+h(t[n])})))}t&&!n&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(s="WebkitTransition",a="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(r="WebkitAnimation",l="webkitAnimationEnd")),t&&(window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout);var d=/\b(transform|all)(,|$)/;function p(t,e,n){var h=function(t,e){var n,a=window.getComputedStyle(t),l=(a[s+"Delay"]||"").split(", "),h=(a[s+"Duration"]||"").split(", "),p=c(l,h),m=(a[r+"Delay"]||"").split(", "),u=(a[r+"Duration"]||"").split(", "),f=c(m,u),v=0,g=0;return e===i?p>0&&(n=i,v=p,g=h.length):e===o?f>0&&(n=o,v=f,g=u.length):g=(n=(v=Math.max(p,f))>0?p>f?i:o:null)?n===i?h.length:u.length:0,{type:n,timeout:v,propCount:g,hasTransform:n===i&&d.test(a[s+"Property"])}}(t,e),p=h.type,m=h.timeout,u=h.propCount;if(!p)return n();var f=p===i?a:l,v=0,g=function(){t.removeEventListener(f,y),n()},y=function(e){e.target===t&&(v+=1)>=u&&g()};return setTimeout((function(){v<u&&g()}),m+1),t.addEventListener(f,y),t}return function(){function t(e,n){var i,o=this;try{if(this.options=t.mergeSettings(n),this.element="string"==typeof e?document.querySelector(e):e,!(i=this.element)||1!==i.nodeType)throw new Error("Element shold be is ELEMENT_NODE, check your parameter");["openHandler","closeHandler"].forEach((function(t){o[t]=o[t].bind(o)})),this.init()}catch(t){console.error(t)}}t.mergeSettings=function(t){var e={dataBackBtn:"data-mega-back-btn",dataContainer:"data-mega-container",dataList:"data-mega-list",dataItem:"data-mega-item",dataLink:"data-mega-link",init:function(){},openTransitionStart:function(){},openTransitionEnd:function(){},closeTransitionStart:function(){},closeTransitionEnd:function(){},beforeDestroy:function(){},destroy:function(){}};return Object.keys(t).forEach((function(n){e[n]=t[n]})),e};var e=t.prototype;return e.attachEvents=function(){this.element.addEventListener("click",this.openHandler),this.element.addEventListener("click",this.closeHandler)},e.detachEvents=function(){this.element.removeEventListener("click",this.openHandler),this.element.removeEventListener("click",this.closeHandler)},e.openHandler=function(t){if(t.target.closest("["+this.options.dataLink+"]")){t.preventDefault();var e=t.target.closest("["+this.options.dataLink+"]");this.openItem(e)}},e.closeHandler=function(t){t.target.closest("["+this.options.dataBackBtn+"]")&&(t.preventDefault(),0!==this.openItems.length&&this.closeItem())},e.getScroll=function(){return this.element.scrollTop},e.updateScroll=function(t){return this.element.scrollTop=t,t},e.updateHeight=function(){if(this.openItems.length){var t=this.openItems[this.openItems.length-1].subMenu.offsetHeight;this.innerContainer.style.height=t+"px"}else this.innerContainer.style.removeProperty("height")},e.updateHeightBeforeOpen=function(){if(this.openItems.length){var t=this.openItems[this.openItems.length-1],e=Math.max(this.element.offsetHeight,t.list.offsetHeight);this.innerContainer.style.height=e+"px"}},e.openItem=function(t){var e=this,n=t.parentElement,i=n.closest("["+this.options.dataList+"]"),o=n.querySelector("["+this.options.dataList+"]"),s=this.getScroll();return i&&n&&!n.classList.contains("is-animation")&&(n.classList.add("is-active","is-animation"),i.classList.add("is-active"),this.openItems.push({item:n,list:i,subMenu:o,link:t,scroll:s}),this.updateHeightBeforeOpen(),this.updateScroll(0),this.options.openTransitionStart.call(this,n,this),p(i,"",(function(){e.updateHeight(),e.options.openTransitionEnd.call(e,n,e)}))),this.openItems},e.closeItem=function(){var t=this;if(this.openItems.length){var e=this.openItems[this.openItems.length-1],n=e.item,i=e.list;if(i&&window.parent){n.classList.remove("is-active"),i.classList.remove("is-active");var o=e.scroll;this.openItems.pop(),this.updateHeight(),this.updateScroll(o),this.options.closeTransitionStart.call(this,n,this),p(i,"",(function(){n.classList.remove("is-animation"),t.options.closeTransitionEnd.call(t,n,t)}))}}return this.openItems},e.closeAllItems=function(){for(var t=this.openItems.length;t--;)this.closeItem()},e.destroy=function(){this.options.beforeDestroy.call(this,this),this.closeAllItems(),this.detachEvents(),this.isInit=!1,this.options.destroy.call(this,this)},e.init=function(){this.isInit||(this.innerContainer=this.element.querySelector("["+this.options.dataContainer+"]"),this.openItems=[],this.attachEvents(),this.isInit=!0,this.options.init.call(this,this))},t}()}));
//# sourceMappingURL=index.min.js.map