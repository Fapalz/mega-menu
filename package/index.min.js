/**
 * MegaMenu  1.0.0
 * GitHub template for starting new projects
 * https://github.com/Fapalz/mega-menu#readme
 *
 * Copyright 2020-2021 Gladikov Kirill - Fapalz <blacesmot@gmail.com>
 *
 * Released under the MIT License
 *
 * Released on: March 5, 2021
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).MegaMenu=e()}(this,(function(){"use strict";var t="undefined"!=typeof window,e=("undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform&&WXEnvironment.platform.toLowerCase(),t&&window.navigator.userAgent.toLowerCase());e&&/msie|trident/.test(e);var n=e&&e.indexOf("msie 9.0")>0;e&&e.indexOf("edge/");e&&e.indexOf("android"),e&&/iphone|ipad|ipod|ios/.test(e),e&&/chrome\/\d+/.test(e),e&&/phantomjs/.test(e),e&&e.match(/firefox\/(\d+)/);var i="transition",o="animation",s="transition",a="transitionend",r="animation",l="animationend";function d(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function m(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return d(e)+d(t[n])})))}t&&!n&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(s="WebkitTransition",a="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(r="WebkitAnimation",l="webkitAnimationEnd")),t&&(window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout);var c=/\b(transform|all)(,|$)/;function h(t,e,n){var d=function(t,e){var n,a=window.getComputedStyle(t),l=(a[s+"Delay"]||"").split(", "),d=(a[s+"Duration"]||"").split(", "),h=m(l,d),u=(a[r+"Delay"]||"").split(", "),p=(a[r+"Duration"]||"").split(", "),f=m(u,p),v=0,g=0;return e===i?h>0&&(n=i,v=h,g=d.length):e===o?f>0&&(n=o,v=f,g=p.length):g=(n=(v=Math.max(h,f))>0?h>f?i:o:null)?n===i?d.length:p.length:0,{type:n,timeout:v,propCount:g,hasTransform:n===i&&c.test(a[s+"Property"])}}(t,e),h=d.type,u=d.timeout,p=d.propCount;if(!h)return n();var f=h===i?a:l,v=0,g=function(){t.removeEventListener(f,w),n()},w=function(e){e.target===t&&(v+=1)>=p&&g()};return setTimeout((function(){v<p&&g()}),u+1),t.addEventListener(f,w),t}return function(){function t(e,n){var i=this;this.options=t.mergeSettings(n),this.element="string"==typeof e?document.querySelector(e):e,["openHandler","backHandler"].forEach((function(t){i[t]=i[t].bind(i)})),this.init()}t.mergeSettings=function(t){var e={dataBackBtn:"data-mega-back-btn",dataContainer:"data-mega-container",dataList:"data-mega-list",dataItem:"data-mega-item",dataLink:"data-mega-link"};return Object.keys(t).forEach((function(n){e[n]=t[n]})),e};var e=t.prototype;return e.attachEvents=function(){var t=this;this.element.querySelectorAll("["+this.options.dataLink+"]").forEach((function(e){e.addEventListener("click",t.openHandler)})),this.element.addEventListener("click",this.backHandler)},e.openHandler=function(t){t.preventDefault();var e=t.currentTarget;this.openItem(e)},e.backHandler=function(t){if(t.target.closest("["+this.options.dataBackBtn+"]")){t.preventDefault();var e=this.openItems.length;0!==e&&this.closeItem(this.openItems[e-1])}},e.updateHeight=function(){if(this.openItems.length){var t=this.openItems[this.openItems.length-1].subMenu.offsetHeight;this.innerContainer.style.height=t+"px"}else this.innerContainer.style.removeProperty("height")},e.openItem=function(t){var e=t.parentElement,n=e.closest("["+this.options.dataList+"]"),i=e.querySelector("["+this.options.dataList+"]"),o=this.element.scrollTop;return n&&e&&!e.classList.contains("is-animation")&&(e.classList.add("is-active","is-animation"),n.classList.add("is-active"),this.openItems.push({item:e,list:n,subMenu:i,link:t,scroll:o}),this.updateHeight()),this.openItems},e.closeItem=function(t){var e=this,n=t.item,i=t.list;if(i&&window.parent){n.classList.remove("is-active"),i.classList.remove("is-active");var o=this.openItems[this.openItems.length-1].scroll;this.openItems.pop(),h(i,"",(function(){n.classList.remove("is-animation"),e.updateHeight(),e.element.scrollTop=o}))}return this.openItems},e.closeAllItems=function(){for(var t=this.openItems.length;t--;)this.closeItem(this.openItems[this.openItems.length-1])},e.init=function(){this.isInit||(this.innerContainer=this.element.querySelector("["+this.options.dataContainer+"]"),this.openItems=[],this.attachEvents(),this.isInit=!0)},t}()}));
//# sourceMappingURL=index.min.js.map